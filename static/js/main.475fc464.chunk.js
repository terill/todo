(this["webpackJsonptodo-front"]=this["webpackJsonptodo-front"]||[]).push([[0],{30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var r,c,o=n(0),s=n.n(o),a=n(22),i=n.n(a),u=(n(30),n(9)),j=n.n(u),b=n(11),l=(n(32),n(7)),d=n(2),h="".concat("https://terill-todo.herokuapp.com","/auth"),f=(n(33),n(1)),p=function(){return Object(f.jsxs)("header",{className:"Header",children:[Object(f.jsx)(l.b,{to:"/",children:"Home"}),Object(f.jsx)(l.b,{to:"/dashboard",children:"Dashboard"}),Object(f.jsx)(l.b,{to:"/signup",children:"Sign up"}),Object(f.jsx)(l.b,{to:"/login",children:"Log in"})]})},O=(n(40),function(){return Object(f.jsx)("div",{children:"Home"})}),x=(n(41),n(8)),m=s.a.createContext(),g=function(e){var t=Object(o.useState)({token:void 0,user:void 0}),n=Object(x.a)(t,2),r=n[0],c=n[1];return Object(f.jsx)(m.Provider,{value:{user:r,setUser:c},children:e.children})},v=m,k=function(){var e=Object(o.useContext)(v),t=e.user,n=(e.setUser,Object(d.f)());return Object(o.useEffect)((function(){t.user||n.push("/login")}),[t.user,n]),Object(f.jsx)("div",{children:"Dashboard"})},S=(n(42),n(43),function(e){return Object(f.jsxs)("div",{className:"ErrorNotice",children:[Object(f.jsx)("span",{children:e.message}),Object(f.jsx)("button",{onClick:e.clearError,children:"X"})]})}),y=n(19),w=n(20),C=w.a.input(r||(r=Object(y.a)(["\n  border: none;\n  height: 100%;\n  outline: 0;\n  font-size: 18px;\n"]))),T=w.a.input.attrs({type:"submit"})(c||(c=Object(y.a)(["\n  width: 100%;\n  font-size: 20px;\n  background-color: #f00;\n  color: #fff;\n  border: none;\n  border-radius: 5px;\n  margin: 0.9rem 0;\n  padding: 1rem 2rem;\n  cursor: pointer;\n  transition: background-color .3s ease-in-out, color .3s ease-in-out;\n\n  &:hover {\n    background-color: #000;\n  }\n"]))),N=(n(45),function(e){return Object(f.jsx)("div",{className:"Field",children:e.children})}),E=function(){var e=Object(o.useState)(),t=Object(x.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(),s=Object(x.a)(c,2),a=s[0],i=s[1],u=Object(o.useState)(),p=Object(x.a)(u,2),O=p[0],m=p[1],g=Object(o.useContext)(v),k=g.user,y=g.setUser,w=Object(d.f)();Object(o.useEffect)((function(){k.user&&w.push("/dashboard")}),[k.user,w]);var E=function(){var e=Object(b.a)(j.a.mark((function e(t){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("".concat(h,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:a})}).then((function(e){return e.json()}));case 3:if(!(r=e.sent).msg){e.next=6;break}return e.abrupt("return",m(r.msg));case 6:return e.next=8,fetch("".concat(h,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:a})}).then((function(e){return e.json()}));case 8:c=e.sent,y({token:c.token,user:c.user}),localStorage.setItem("auth-token",c.token),w.push("/dashboard");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"Signup",children:[Object(f.jsx)("h1",{children:"Sign up for free"}),O&&Object(f.jsx)(S,{message:O,clearError:function(){return m(void 0)}}),Object(f.jsxs)("form",{onSubmit:E,children:[Object(f.jsxs)(N,{children:[Object(f.jsx)("label",{htmlFor:"email",children:"email"}),Object(f.jsx)(C,{type:"email",id:"email",onChange:function(e){return r(e.target.value)}})]}),Object(f.jsxs)(N,{children:[Object(f.jsx)("label",{htmlFor:"email",children:"password"}),Object(f.jsx)(C,{type:"password",id:"password",onChange:function(e){return i(e.target.value)}})]}),Object(f.jsx)(T,{value:"Sign up"})]}),"Already have an account? ",Object(f.jsx)(l.b,{to:"/login",children:"Log in"})]})},F=(n(46),function(){var e=Object(o.useState)(),t=Object(x.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(),s=Object(x.a)(c,2),a=s[0],i=s[1],u=Object(o.useState)(),p=Object(x.a)(u,2),O=p[0],m=p[1],g=Object(o.useContext)(v),k=g.user,y=g.setUser,w=Object(d.f)();Object(o.useEffect)((function(){k.user&&w.push("/dashboard")}),[k.user,w]);var E=function(){var e=Object(b.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("".concat(h,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:a})}).then((function(e){return e.json()}));case 3:if(!(r=e.sent).msg){e.next=6;break}return e.abrupt("return",m(r.msg));case 6:y({token:r.token,user:r.user}),localStorage.setItem("auth-token",r.token),w.push("/dashboard");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"Login",children:[Object(f.jsx)("h1",{children:"Log in"}),O&&Object(f.jsx)(S,{message:O,clearError:function(){return m(void 0)}}),Object(f.jsxs)("form",{onSubmit:E,children:[Object(f.jsxs)(N,{children:[Object(f.jsx)("label",{htmlFor:"email",children:"email"}),Object(f.jsx)(C,{type:"email",id:"email",onChange:function(e){return r(e.target.value)}})]}),Object(f.jsxs)(N,{children:[Object(f.jsx)("label",{htmlFor:"email",children:"password"}),Object(f.jsx)(C,{type:"password",id:"password",onChange:function(e){return i(e.target.value)}})]}),Object(f.jsx)(T,{value:"Log in"})]}),"Don't have an account? ",Object(f.jsx)(l.b,{to:"/signup",children:"Sign up"})]})});var L=function(){var e=Object(o.useContext)(v).setUser;return Object(o.useEffect)((function(){Object(b.a)(j.a.mark((function t(){var n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===(n=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),n=""),t.next=4,fetch("".concat(h,"/token"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":n}}).then((function(e){return e.json()}));case 4:if(!t.sent){t.next=10;break}return t.next=8,fetch("".concat(h,"/"),{headers:{"Content-Type":"application/json","auth-token":n}}).then((function(e){return e.json()}));case 8:r=t.sent,e({token:n,user:r});case 10:case"end":return t.stop()}}),t)})))()}),[e]),Object(f.jsx)("div",{className:"App",children:Object(f.jsxs)(l.a,{children:[Object(f.jsx)(p,{}),Object(f.jsxs)(d.c,{children:[Object(f.jsx)(d.a,{exact:!0,path:"/",component:O}),Object(f.jsx)(d.a,{path:"/dashboard",component:k}),Object(f.jsx)(d.a,{exact:!0,path:"/signup",component:E}),Object(f.jsx)(d.a,{exact:!0,path:"/login",component:F})]})]})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),o(e),s(e)}))};i.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(g,{children:Object(f.jsx)(L,{})})}),document.getElementById("root")),P()}},[[47,1,2]]]);
//# sourceMappingURL=main.475fc464.chunk.js.map