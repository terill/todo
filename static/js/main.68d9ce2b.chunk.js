(this["webpackJsonptodo-front"]=this["webpackJsonptodo-front"]||[]).push([[0],{31:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var r,c,o=n(0),a=n.n(o),s=n(23),i=n.n(s),u=(n(31),n(4)),j=n.n(u),d=n(11),b=(n(33),n(10)),l=n(2),h="https://terill-todo.herokuapp.com",O="".concat(h,"/auth"),f="".concat(h,"/todo"),p=(n(34),n(5)),x=n(1),g=a.a.createContext(),m=function(e){var t=Object(o.useState)(null),n=Object(p.a)(t,2),r=n[0],c=n[1];return Object(x.jsx)(g.Provider,{value:{user:r,setUser:c},children:e.children})},v=g,k=function(){var e=Object(o.useContext)(v),t=e.user,n=e.setUser,r=Object(l.g)();return Object(x.jsxs)("header",{className:"Header",children:[Object(x.jsx)(b.b,{to:"/",children:"Home"}),!t&&Object(x.jsx)(b.b,{to:"/login",children:"Log in"}),!t&&Object(x.jsx)(b.b,{to:"/signup",children:"Sign up"}),t&&Object(x.jsx)(b.b,{to:"/dashboard",children:"Dashboard"}),t&&Object(x.jsx)("button",{onClick:function(){localStorage.removeItem("auth-token"),n(null),r.push("/")},children:"Log out"})]})},C=(n(41),function(){return Object(x.jsx)("div",{children:"Home"})}),S=(n(42),n(6)),y=a.a.createContext(),w=function(e){var t=Object(o.useContext)(v).user,n=Object(o.useState)([]),r=Object(p.a)(n,2),c=r[0],a=r[1],s=function(){var e=Object(d.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/edit"),{method:"PUT",headers:{"Content-Type":"application/json","auth-token":t.token},body:JSON.stringify(Object(S.a)(Object(S.a)({},n),{},{id:n._id}))}).then((function(e){return e.json()})).then((function(e){return console.log(e)}));case 2:a(c.map((function(e){return n._id===e._id?n:e})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)(y.Provider,{value:{todos:c,setTodos:a,updateTodo:s},children:e.children})},T=y,N=(n(43),function(e){var t=Object(o.useContext)(T).updateTodo,n=Object(o.useState)({editMode:!1,prevent:!1,timer:null}),r=Object(p.a)(n,2),c=r[0],a=r[1],s=Object(o.useState)(null),i=Object(p.a)(s,2),u=i[0],j=i[1];return Object(x.jsx)(x.Fragment,{children:c.editMode?Object(x.jsx)("div",{className:"Todo editMode",children:Object(x.jsx)("input",{type:"text",value:u.todo,onChange:function(e){return j(Object(S.a)(Object(S.a)({},u),{},{todo:e.target.value}))}})}):Object(x.jsx)("div",{className:"Todo"+(e.data.done?" done":""),draggable:!0,onClick:function(){a(Object(S.a)(Object(S.a)({},c),{},{timer:setTimeout((function(){c.prevent||(a(Object(S.a)(Object(S.a)({},c),{},{prevent:!1})),t(Object(S.a)(Object(S.a)({},e.data),{},{done:!e.data.done})),j(null))}),50)}))},onDoubleClick:function(){clearTimeout(c.timer),a(Object(S.a)(Object(S.a)({},c),{},{editMode:!0,prevent:!0,timer:null})),j(e.data),console.log("editmode")},children:e.data.todo})})}),F=function(){var e=Object(o.useContext)(v).user,t=Object(o.useContext)(T),n=t.todos,r=t.setTodos;Object(o.useEffect)((function(){Object(d.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(f,{headers:{"auth-token":e.token}}).then((function(e){return e.json()})).then((function(e){return r(e)}));case 2:case"end":return t.stop()}}),t)})))()}),[r,e.token]);var c=new Date;console.log(n);var a=n.length&&n.map((function(e){return Object(x.jsx)(N,{data:e},e._id)}));return Object(x.jsxs)("div",{className:"Dashboard",children:[Object(x.jsx)("button",{onClick:function(){console.log("back")},children:"Back"}),Object(x.jsx)("div",{className:"todoList",children:a}),c.getUTCFullYear(),Object(x.jsx)("br",{}),c.getUTCMonth(),Object(x.jsx)("br",{}),c.getUTCDate(),Object(x.jsx)("br",{}),c.getUTCDay(),Object(x.jsx)("br",{}),Object(x.jsx)("button",{onClick:function(){console.log("forward")},children:"Forward"})]})},D=(n(44),n(45),function(e){return Object(x.jsxs)("div",{className:"ErrorNotice",children:[Object(x.jsx)("span",{children:e.message}),Object(x.jsx)("button",{onClick:e.clearError,children:"X"})]})}),U=n(20),L=n(21),P=L.a.input(r||(r=Object(U.a)(["\n  border: none;\n  height: 100%;\n  outline: 0;\n  font-size: 18px;\n"]))),E=L.a.input.attrs({type:"submit"})(c||(c=Object(U.a)(["\n  width: 100%;\n  font-size: 20px;\n  background-color: #f00;\n  color: #fff;\n  border: none;\n  border-radius: 5px;\n  margin: 0.9rem 0;\n  padding: 1rem 2rem;\n  cursor: pointer;\n  transition: background-color .3s ease-in-out, color .3s ease-in-out;\n\n  &:hover {\n    background-color: #000;\n  }\n"]))),I=(n(47),function(e){return Object(x.jsx)("div",{className:"Field",children:e.children})}),J=function(){var e=Object(o.useState)(),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(),a=Object(p.a)(c,2),s=a[0],i=a[1],u=Object(o.useState)(),h=Object(p.a)(u,2),f=h[0],g=h[1],m=Object(o.useContext)(v).setUser,k=Object(l.g)(),C=function(){var e=Object(d.a)(j.a.mark((function e(t){var r,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("".concat(O,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:s})}).then((function(e){return e.json()}));case 3:if(!(r=e.sent).msg){e.next=6;break}return e.abrupt("return",g(r.msg));case 6:return e.next=8,fetch("".concat(O,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:s})}).then((function(e){return e.json()}));case 8:c=e.sent,m({token:c.token,user:c.user}),localStorage.setItem("auth-token",c.token),k.push("/dashboard");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"Signup",children:[Object(x.jsx)("h1",{children:"Sign up for free"}),f&&Object(x.jsx)(D,{message:f,clearError:function(){return g(void 0)}}),Object(x.jsxs)("form",{onSubmit:C,children:[Object(x.jsxs)(I,{children:[Object(x.jsx)("label",{htmlFor:"email",children:"email"}),Object(x.jsx)(P,{type:"email",id:"email",onChange:function(e){return r(e.target.value)}})]}),Object(x.jsxs)(I,{children:[Object(x.jsx)("label",{htmlFor:"email",children:"password"}),Object(x.jsx)(P,{type:"password",id:"password",onChange:function(e){return i(e.target.value)}})]}),Object(x.jsx)(E,{value:"Sign up"})]}),"Already have an account? ",Object(x.jsx)(b.b,{to:"/login",children:"Log in"})]})},M=(n(48),function(){var e=Object(o.useState)(),t=Object(p.a)(e,2),n=t[0],r=t[1],c=Object(o.useState)(),a=Object(p.a)(c,2),s=a[0],i=a[1],u=Object(o.useState)(),h=Object(p.a)(u,2),f=h[0],g=h[1],m=Object(o.useContext)(v).setUser,k=Object(l.g)(),C=function(){var e=Object(d.a)(j.a.mark((function e(t){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("".concat(O,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:s})}).then((function(e){return e.json()}));case 3:if(!(r=e.sent).msg){e.next=6;break}return e.abrupt("return",g(r.msg));case 6:m({token:r.token,user:r.user}),localStorage.setItem("auth-token",r.token),k.push("/dashboard");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"Login",children:[Object(x.jsx)("h1",{children:"Log in"}),f&&Object(x.jsx)(D,{message:f,clearError:function(){return g(void 0)}}),Object(x.jsxs)("form",{onSubmit:C,children:[Object(x.jsxs)(I,{children:[Object(x.jsx)("label",{htmlFor:"email",children:"email"}),Object(x.jsx)(P,{type:"email",id:"email",onChange:function(e){return r(e.target.value)}})]}),Object(x.jsxs)(I,{children:[Object(x.jsx)("label",{htmlFor:"email",children:"password"}),Object(x.jsx)(P,{type:"password",id:"password",onChange:function(e){return i(e.target.value)}})]}),Object(x.jsx)(E,{value:"Log in"})]}),"Don't have an account? ",Object(x.jsx)(b.b,{to:"/signup",children:"Sign up"})]})});var _=function(){var e=Object(o.useContext)(v),t=e.user,n=e.setUser;return Object(o.useEffect)((function(){Object(d.a)(j.a.mark((function e(){var t,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null===(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,fetch("".concat(O,"/token"),{method:"POST",headers:{"Content-Type":"application/json","auth-token":t}}).then((function(e){return e.json()}));case 4:if(!e.sent){e.next=10;break}return e.next=8,fetch("".concat(O,"/"),{headers:{"Content-Type":"application/json","auth-token":t}}).then((function(e){return e.json()}));case 8:r=e.sent,n({token:t,user:r});case 10:case"end":return e.stop()}}),e)})))()}),[n]),Object(x.jsx)("div",{className:"App",children:Object(x.jsxs)(b.a,{children:[Object(x.jsx)(k,{}),Object(x.jsxs)(l.d,{children:[Object(x.jsx)(l.b,{exact:!0,path:"/",component:C}),Object(x.jsx)(l.b,{path:"/dashboard",render:function(){return t?Object(x.jsx)(F,{}):Object(x.jsx)(l.a,{to:"/login"})}}),Object(x.jsx)(l.b,{path:"/signup",render:function(){return t?Object(x.jsx)(l.a,{to:"/dashboard"}):Object(x.jsx)(J,{})}}),Object(x.jsx)(l.b,{path:"/login",render:function(){return t?Object(x.jsx)(l.a,{to:"/dashboard"}):Object(x.jsx)(M,{})}})]})]})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,50)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),o(e),a(e)}))};i.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(m,{children:Object(x.jsx)(w,{children:Object(x.jsx)(_,{})})})}),document.getElementById("root")),B()}},[[49,1,2]]]);
//# sourceMappingURL=main.68d9ce2b.chunk.js.map